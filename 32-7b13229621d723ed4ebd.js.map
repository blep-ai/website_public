{"version":3,"sources":["webpack:///./src/components/ChartWrapper/index.js","webpack:///./node_modules/fast-deep-equal/index.js","webpack:///./node_modules/fancy-canvas/coordinate-space.js"],"names":["addSeriesFunctions","candlestick","line","area","bar","histogram","colors","ChartWrapper","props","resizeHandler","width","autoWidth","chartDiv","current","parentNode","clientWidth","height","autoHeight","clientHeight","chart","resize","removeSeries","series","forEach","serie","addSeries","type","func","color","option","options","length","data","handleLinearInterpolation","linearInterpolation","setData","markers","setMarkers","priceLines","createPriceLine","legend","addLegend","handleSeries","candlestickSeries","push","lineSeries","areaSeries","barSeries","histogramSeries","unsubscribeEvents","prevProps","unsubscribeClick","onClick","unsubscribeCrosshairMove","onCrosshairMove","unsubscribeVisibleTimeRangeChange","onTimeRangeMove","handleEvents","subscribeClick","subscribeCrosshairMove","subscribeVisibleTimeRangeChange","handleLegends","handleTimeRange","from","to","timeScale","setVisibleRange","candleTime","value","first","time","last","newData","Array","Math","floor","index","i","prevTime","prevValue","interTime","interValue","filter","x","handleUpdateChart","window","removeEventListener","applyOptions","legends","handleMainLegend","addEventListener","title","param","div","legendDiv","innerHTML","price","seriesPrices","get","undefined","open","close","high","low","row","document","createElement","innerText","priceElem","style","appendChild","React","createRef","componentDidMount","a","this","createChart","componentDidUpdate","equal","render","className","ref","position","zIndex","padding","Component","module","exports","b","constructor","keys","isArray","RegExp","source","flags","valueOf","Object","prototype","toString","hasOwnProperty","call","key","bindToDevicePixelRatio","canvas","DevicePixelRatioBinding","_this","_resolutionMediaQueryList","_resolutionListener","ev","_onResolutionChanged","_canvasConfiguredListeners","_canvasSize","_configureCanvas","_installResolutionListener","destroy","_uninstallResolutionListener","defineProperty","enumerable","configurable","resizeCanvas","size","win","ownerDocument","defaultView","Error","devicePixelRatio","subscribeCanvasConfigured","listener","unsubscribeCanvasConfigured","l","ratio","pixelRatio","_emitCanvasConfigured","dppx","matchMedia","addListener","removeListener","_reinstallResolutionListener"],"mappings":"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","file":"32-7b13229621d723ed4ebd.js","sourcesContent":["import React from 'react'\nimport { createChart } from 'lightweight-charts'\nimport equal from 'fast-deep-equal'\n\nconst addSeriesFunctions = {\n  candlestick: 'addCandlestickSeries',\n  line: 'addLineSeries',\n  area: 'addAreaSeries',\n  bar: 'addBarSeries',\n  histogram: 'addHistogramSeries',\n}\n\nconst colors = [\n  '#008FFB',\n  '#00E396',\n  '#FEB019',\n  '#FF4560',\n  '#775DD0',\n  '#F86624',\n  '#A5978B',\n]\n\nclass ChartWrapper extends React.Component {\n  constructor (props) {\n    super(props)\n    this.chartDiv = React.createRef()\n    this.legendDiv = React.createRef()\n    this.chart = null\n    this.series = []\n    this.legends = []\n  }\n\n  async componentDidMount () {\n    this.chart = createChart(this.chartDiv.current)\n    this.handleUpdateChart()\n    this.resizeHandler()\n  }\n\n  componentDidUpdate (prevProps) {\n    if (!this.props.autoWidth && !this.props.autoHeight) { window.removeEventListener('resize', this.resizeHandler) }\n    if (\n      !equal(\n        [\n          prevProps.onCrosshairMove,\n          prevProps.onTimeRangeMove,\n          prevProps.onClick,\n        ],\n        [\n          this.props.onCrosshairMove,\n          this.props.onTimeRangeMove,\n          this.props.onClick,\n        ],\n      )\n    ) { this.unsubscribeEvents(prevProps) }\n    if (\n      !equal(\n        [\n          prevProps.options,\n          prevProps.candlestickSeries,\n          prevProps.lineSeries,\n          prevProps.areaSeries,\n          prevProps.barSeries,\n          prevProps.histogramSeries,\n        ],\n        [\n          this.props.options,\n          this.props.candlestickSeries,\n          this.props.lineSeries,\n          this.props.areaSeries,\n          this.props.barSeries,\n          this.props.histogramSeries,\n        ],\n      )\n    ) {\n      this.removeSeries()\n      this.handleUpdateChart()\n    } else if (\n      prevProps.from !== this.props.from ||\n\t\t\tprevProps.to !== this.props.to\n    ) { this.handleTimeRange() }\n  }\n\n\tresizeHandler = () => {\n\t  const width =\n\t\t\tthis.props.autoWidth &&\n\t\t\tthis.chartDiv.current &&\n\t\t\tthis.chartDiv.current.parentNode.clientWidth\n\t  const height =\n\t\t\tthis.props.autoHeight && this.chartDiv.current\n\t\t\t  ? this.chartDiv.current.parentNode.clientHeight\n\t\t\t  : this.props.height || 500\n\t  this.chart.resize(width, height)\n\t};\n\n\tremoveSeries = () => {\n\t  this.series.forEach(serie => this.chart.removeSeries(serie))\n\t  this.series = []\n\t};\n\n\taddSeries = (serie, type) => {\n\t  const func = addSeriesFunctions[type]\n\t  const color =\n\t\t\t(serie.option && serie.options.color) ||\n\t\t\tcolors[this.series.length % colors.length]\n\t  const series = this.chart[func]({\n\t    color,\n\t    ...serie.options,\n\t  })\n\t  const data = this.handleLinearInterpolation(\n\t    serie.data,\n\t    serie.linearInterpolation,\n\t  )\n\t  series.setData(data)\n\t  if (serie.markers) series.setMarkers(serie.markers)\n\t  if (serie.priceLines) { serie.priceLines.forEach(line => series.createPriceLine(line)) }\n\t  if (serie.legend) this.addLegend(series, color, serie.legend)\n\t  return series\n\t};\n\n\thandleSeries = () => {\n\t  const series = this.series\n\t  const props = this.props\n\t  props.candlestickSeries &&\n\t\t\tprops.candlestickSeries.forEach(serie => {\n\t\t\t  series.push(this.addSeries(serie, 'candlestick'))\n\t\t\t})\n\n\t  props.lineSeries &&\n\t\t\tprops.lineSeries.forEach(serie => {\n\t\t\t  series.push(this.addSeries(serie, 'line'))\n\t\t\t})\n\n\t  props.areaSeries &&\n\t\t\tprops.areaSeries.forEach(serie => {\n\t\t\t  series.push(this.addSeries(serie, 'area'))\n\t\t\t})\n\n\t  props.barSeries &&\n\t\t\tprops.barSeries.forEach(serie => {\n\t\t\t  series.push(this.addSeries(serie, 'bar'))\n\t\t\t})\n\n\t  props.histogramSeries &&\n\t\t\tprops.histogramSeries.forEach(serie => {\n\t\t\t  series.push(this.addSeries(serie, 'histogram'))\n\t\t\t})\n\t};\n\n\tunsubscribeEvents = prevProps => {\n\t  const chart = this.chart\n\t  chart.unsubscribeClick(prevProps.onClick)\n\t  chart.unsubscribeCrosshairMove(prevProps.onCrosshairMove)\n\t  chart.unsubscribeVisibleTimeRangeChange(prevProps.onTimeRangeMove)\n\t};\n\n\thandleEvents = () => {\n\t  const chart = this.chart\n\t  const props = this.props\n\t  props.onClick && chart.subscribeClick(props.onClick)\n\t  props.onCrosshairMove &&\n\t\t\tchart.subscribeCrosshairMove(props.onCrosshairMove)\n\t  props.onTimeRangeMove &&\n\t\t\tchart.subscribeVisibleTimeRangeChange(props.onTimeRangeMove)\n\n\t  // handle legend dynamical change\n\t  chart.subscribeCrosshairMove(this.handleLegends)\n\t};\n\n\thandleTimeRange = () => {\n\t  const { from, to } = this.props\n\t  from && to && this.chart.timeScale().setVisibleRange({ from, to })\n\t};\n\n\thandleLinearInterpolation = (data, candleTime) => {\n\t  if (!candleTime || data.length < 2 || !data[0].value) return data\n\t  const first = data[0].time\n\t  const last = data[data.length - 1].time\n\t  const newData = new Array(Math.floor((last - first) / candleTime))\n\t  newData[0] = data[0]\n\t  let index = 1\n\t  for (let i = 1; i < data.length; i++) {\n\t    newData[index++] = data[i]\n\t    const prevTime = data[i - 1].time\n\t    const prevValue = data[i - 1].value\n\t    const { time, value } = data[i]\n\t    for (\n\t      let interTime = prevTime;\n\t      interTime < time - candleTime;\n\t      interTime += candleTime\n\t    ) {\n\t      // interValue get from the Taylor-Young formula\n\t      const interValue =\n\t\t\t\t\tprevValue +\n\t\t\t\t\t(interTime - prevTime) *\n\t\t\t\t\t((value - prevValue) / (time - prevTime))\n\t      newData[index++] = { time: interTime, value: interValue }\n\t    }\n\t  }\n\t  // return only the valid values\n\t  return newData.filter(x => x)\n\t};\n\n\thandleUpdateChart = () => {\n\t  window.removeEventListener('resize', this.resizeHandler)\n\t  const { chart, chartDiv } = this\n\t  const props = this.props\n\t  const options = {\n\t    width: props.autoWidth\n\t      ? chartDiv.current.parentNode.clientWidth\n\t      : props.width,\n\t    height: props.autoHeight\n\t      ? chartDiv.current.parentNode.clientHeight\n\t      : props.height || 500,\n\t    ...props.options,\n\t  }\n\t  chart.applyOptions(options)\n\t  this.legends = []\n\t  if (this.props.legend) this.handleMainLegend()\n\n\t  this.handleSeries()\n\t  this.handleEvents()\n\t  this.handleTimeRange()\n\n\t  if (props.autoWidth || props.autoHeight)\n\t  // resize the chart with the window\n\t    { window.addEventListener('resize', this.resizeHandler) }\n\t};\n\n\taddLegend = (series, color, title) => {\n\t  this.legends.push({ series, color, title })\n\t};\n\n\thandleLegends = param => {\n\t  const div = this.legendDiv.current\n\t  if (param.time && div && this.legends.length) {\n\t    div.innerHTML = ''\n\t    this.legends.forEach(({ series, color, title }) => {\n\t      let price = param.seriesPrices.get(series)\n\t      if (price !== undefined) {\n\t        if (typeof price === 'object') {\n\t          color =\n\t\t\t\t\t\t\tprice.open < price.close\n\t\t\t\t\t\t\t  ? 'rgba(0, 150, 136, 0.8)'\n\t\t\t\t\t\t\t  : 'rgba(255,82,82, 0.8)'\n\t          price = `O: ${price.open}, H: ${price.high}, L: ${price.low}, C: ${price.close}`\n\t        }\n\t        const row = document.createElement('div')\n\t        row.innerText = title + ' '\n\t        const priceElem = document.createElement('span')\n\t        priceElem.style.color = color\n\t        priceElem.innerText = ' ' + price\n\t        row.appendChild(priceElem)\n\t        div.appendChild(row)\n\t      }\n\t    })\n\t  }\n\t};\n\n\thandleMainLegend = () => {\n\t  if (this.legendDiv.current) {\n\t    const row = document.createElement('div')\n\t    row.innerText = this.props.legend\n\t    this.legendDiv.current.appendChild(row)\n\t  }\n\t};\n\n\trender () {\n\t  return (\n  <div className={this.props.className} ref={this.chartDiv} style={{ position: 'relative' }}>\n  <div\n  ref={this.legendDiv}\n  style={{\n\t          position: 'absolute',\n\t          zIndex: 2,\n\t          color: '#000A',\n\t          padding: 10,\n\t        }}\n\t      />\n\t    </div>\n\t  )\n\t}\n}\n\nexport default ChartWrapper\n// export * from \"lightweight-charts\";\n","'use strict'; // do not edit .js files directly - edit src/index.jst\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n    var length, i, keys;\n\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n\n      for (i = length; i-- !== 0;) {\n        if (!equal(a[i], b[i])) return false;\n      }\n\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;) {\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    }\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  } // true if both NaN, false otherwise\n\n\n  return a !== a && b !== b;\n};","export function bindToDevicePixelRatio(canvas) {\n  return new DevicePixelRatioBinding(canvas);\n}\n\nvar DevicePixelRatioBinding =\n/** @class */\nfunction () {\n  function DevicePixelRatioBinding(canvas) {\n    var _this = this;\n\n    this._resolutionMediaQueryList = null;\n\n    this._resolutionListener = function (ev) {\n      return _this._onResolutionChanged();\n    };\n\n    this._canvasConfiguredListeners = [];\n    this.canvas = canvas;\n    this._canvasSize = {\n      width: this.canvas.clientWidth,\n      height: this.canvas.clientHeight\n    };\n\n    this._configureCanvas();\n\n    this._installResolutionListener();\n  }\n\n  DevicePixelRatioBinding.prototype.destroy = function () {\n    this._canvasConfiguredListeners.length = 0;\n\n    this._uninstallResolutionListener();\n\n    this.canvas = null;\n  };\n\n  Object.defineProperty(DevicePixelRatioBinding.prototype, \"canvasSize\", {\n    get: function get() {\n      return {\n        width: this._canvasSize.width,\n        height: this._canvasSize.height\n      };\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  DevicePixelRatioBinding.prototype.resizeCanvas = function (size) {\n    this._canvasSize = {\n      width: size.width,\n      height: size.height\n    };\n\n    this._configureCanvas();\n  };\n\n  Object.defineProperty(DevicePixelRatioBinding.prototype, \"pixelRatio\", {\n    get: function get() {\n      // According to DOM Level 2 Core specification, ownerDocument should never be null for HTMLCanvasElement\n      // see https://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#node-ownerDoc\n      var win = this.canvas.ownerDocument.defaultView;\n\n      if (win == null) {\n        throw new Error('No window is associated with the canvas');\n      }\n\n      return win.devicePixelRatio;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  DevicePixelRatioBinding.prototype.subscribeCanvasConfigured = function (listener) {\n    this._canvasConfiguredListeners.push(listener);\n  };\n\n  DevicePixelRatioBinding.prototype.unsubscribeCanvasConfigured = function (listener) {\n    this._canvasConfiguredListeners = this._canvasConfiguredListeners.filter(function (l) {\n      return l != listener;\n    });\n  };\n\n  DevicePixelRatioBinding.prototype._configureCanvas = function () {\n    var ratio = this.pixelRatio;\n    this.canvas.style.width = this._canvasSize.width + \"px\";\n    this.canvas.style.height = this._canvasSize.height + \"px\";\n    this.canvas.width = this._canvasSize.width * ratio;\n    this.canvas.height = this._canvasSize.height * ratio;\n\n    this._emitCanvasConfigured();\n  };\n\n  DevicePixelRatioBinding.prototype._emitCanvasConfigured = function () {\n    var _this = this;\n\n    this._canvasConfiguredListeners.forEach(function (listener) {\n      return listener.call(_this);\n    });\n  };\n\n  DevicePixelRatioBinding.prototype._installResolutionListener = function () {\n    if (this._resolutionMediaQueryList !== null) {\n      throw new Error('Resolution listener is already installed');\n    } // According to DOM Level 2 Core specification, ownerDocument should never be null for HTMLCanvasElement\n    // see https://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#node-ownerDoc\n\n\n    var win = this.canvas.ownerDocument.defaultView;\n\n    if (win == null) {\n      throw new Error('No window is associated with the canvas');\n    }\n\n    var dppx = win.devicePixelRatio;\n    this._resolutionMediaQueryList = win.matchMedia(\"all and (resolution: \" + dppx + \"dppx)\"); // IE and some versions of Edge do not support addEventListener/removeEventListener, and we are going to use the deprecated addListener/removeListener\n\n    this._resolutionMediaQueryList.addListener(this._resolutionListener);\n  };\n\n  DevicePixelRatioBinding.prototype._uninstallResolutionListener = function () {\n    if (this._resolutionMediaQueryList !== null) {\n      // IE and some versions of Edge do not support addEventListener/removeEventListener, and we are going to use the deprecated addListener/removeListener\n      this._resolutionMediaQueryList.removeListener(this._resolutionListener);\n\n      this._resolutionMediaQueryList = null;\n    }\n  };\n\n  DevicePixelRatioBinding.prototype._reinstallResolutionListener = function () {\n    this._uninstallResolutionListener();\n\n    this._installResolutionListener();\n  };\n\n  DevicePixelRatioBinding.prototype._onResolutionChanged = function () {\n    this._configureCanvas();\n\n    this._reinstallResolutionListener();\n  };\n\n  return DevicePixelRatioBinding;\n}();"],"sourceRoot":""}